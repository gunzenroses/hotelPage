include ../button/button.pug
include ../date-range/date-range.pug
include ../dropdown/dropdown.pug

mixin card-booking({ info })
  -
    const { theme, roomInfos, guestsAmount, priceInfos, totalPrice } = info;

    const cardBookingClass = theme === ''
      ? 'card-booking'
      : `card-booking card-booking_in_${ theme }`;
    
    const { itemsGuests, dropdownGuests } = require('Utils/dropdown-guests.json');

  form(class = cardBookingClass method = 'get' action = './search-room.html')
    - const { roomNumber, roomType, roomPrice } = roomInfos;
    .card__row
      .card__group
        span.card-booking__number-sign №
        span.card-booking__number!= roomNumber
        span.card-booking__suite!= roomType
      .card__group
        span.card-booking__price!= `${roomPrice}₽`
        span.card-booking__period &nbsp;в сутки
    .card-booking__date-range
      +date-range({
        dateRanges: [
          {
            text: 'Прибытие',
            value: '19.08.2019',
            name: 'check-in',
            data: 'check-in'
          }, {
            text: 'Выезд',
            value: '23.08.2019',
            name: 'check-out',
            data: 'check-out'
          }
        ]
      })
    .card-booking__dropdown-guests
      +dropdown({
        text: 'Гости',
        itemsAmount: guestsAmount,
        itemsInfo: itemsGuests,
        dropdownInfo: dropdownGuests,
      })
    each priceInfo in priceInfos 
      - const { infoDescription, infoSign, infoPrice } = priceInfo;
      .card-booking__price-info
        .card-booking__description!= infoDescription
          if infoSign === 'full'
            .card-booking__info-sign
        .card-booking__expense!= `${ infoPrice }₽`
    .card-booking__summary
      .card-booking__text Итого
      .card-booking__line
      .card-booking__text!= `${totalPrice}₽`
    .card-booking__button
      +button({ 
        text: 'Забронировать',
        innerElement: 'submit',
        theme: theme
      })